<!DOCTYPE html>
<html lang="en">
<head>

  <meta charset="UTF-8">
  <title>Eindopdracht</title>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <script src="https://aframe.io/releases/0.7.0/aframe.min.js"></script>
</head>

<body>
  <a-scene stats >
    <a-camera></a-camera>

    <a-entity class="parent" position="0 0 0">
      <a-entity class="box" geometry="primitive: box" material="color: red" position="-5 0 0"></a-entity>
      <a-entity class="box" geometry="primitive: box" material="color: green" position="5 0 0"></a-entity>
      <a-entity class="box" geometry="primitive: box" material="color: yellow" position="0 0 5"></a-entity  >
      <a-entity class="box" geometry="primitive: box" material="color: blue" position="0 0 -5"></a-entity>

    </a-entity>

    <a-sky color="#555"></a-sky>

  </a-scene>


  <script type="text/javascript">
    let positionX = -5;
    let positionY = 1;
    let positionZ = 0;

    const init = () => {
      update();
    }

    const update = () => {
      const cameraPosition = document.querySelector('a-camera').components.rotation.data;
      const cameraPositionY = Math.floor(Math.abs(cameraPosition.y % 360));

      const speed = 0.05;

      let xChange = 0;
      let zChange = 0;

      if(cameraPositionY === 0){
        //Z++
        zChange = speed;
        //X0
      }else if(cameraPositionY < 90){
        //Z++
        zChange = (90-cameraPositionY)/90*speed
        //X++
        xChange = cameraPositionY/90*speed
      }else if(cameraPositionY === 90){
        //Z0
        //X++
        xChange = speed;
      }else if(cameraPositionY < 180){
        //Z--
        zChange = -((cameraPositionY-90)/90*speed)
        //X++
        xChange = (Math.abs(cameraPositionY-180))/90*speed
      }else if(cameraPositionY === 180){
        //Z--
        zChange = -speed;
        //X0
      }else if(cameraPositionY < 270){
        //Z--
        zChange = -((270-cameraPositionY)/90*speed)
        //X--
        xChange = -((cameraPositionY-180)/90*speed)
      }else if(cameraPositionY === 270){
        //Z0
        //X--
        xChange = -speed;
      }else if(cameraPositionY < 360){
        //Z++
        zChange = (cameraPositionY-270)/90*speed
        //X--
        xChange = -((360-cameraPositionY)/90*speed)
      }

      positionX += xChange;
      positionZ += zChange;

      document.querySelector('.parent').setAttribute('position', `${positionX}, ${positionY}, ${positionZ}`);

      requestAnimationFrame(update);
    }

    init();

  </script>
</body>

</html>
